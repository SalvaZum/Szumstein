const formacionLaboral = [
    {
    url:"https://centromedico2206.vercel.app", 
    imgs:["imagenes/proyectos/centroMedico.png","imagenes/proyectos/centroMedico(1).png","imagenes/proyectos/centroMedico(2).png","imagenes/proyectos/centroMedico(3).png"],  
    nombre:`Centro Medico`, 
    categoria:"pagina web",
    a√±o:"2025",
    herramientas: ["HTML", "CSS", "JavaScript", "Firebase", "Api Google Calendar"],
    descripcion:"Ademas de ser una pagina web excelente, cuenta con un sistema para agendar turnos y un apartado para el personal donde gestionan los mismos"
    },
    {
    url:"", 
    imgs:[], 
    nombre:`Pasantia en Claro`, 
    categoria:"pasantia",
    a√±o:"2025",
    herramientas: ["Firebase Studio"],
    descripcion:"En la pasantia de Claro, ademas de seguir el programa que ellos tenian planificado para este tiempo donde aprendimos sobre habilidades blandas como ventas, autodesarrollo, autoliderazgo, etc. Tambien desarrollamos un programa entre todos los pasantes el cual tenia como objetivo reemplazar un sistema viejo que utilizaban los empleados de esta empresa que servia par llevar el registro de los productos que cada empleado sacaba del almacen."
    },
    {
    url:"https://pollos-hermanos-delta.vercel.app", 
    imgs:["imagenes/proyectos/pollosHermanos.png","imagenes/proyectos/pollosHermanos(1).png","imagenes/proyectos/pollosHermanos(2).png"], 
    nombre:"Pollos Hermanos", 
    categoria: "pagina web",
    a√±o:"2025",
    herramientas: ["HTML", "CSS", "JavaScript"],
    descripcion: "El emprendimiento de los Pollos Hermanos no solo vende pollos de la mejor calidad a travez del boca en boca, sino que su gran pagina tambien te invita a probar de su cocina"
    },
]
const proyectos=[
    {
    url:"https://sentio-web.vercel.app", 
    imgs:["imagenes/proyectos/sentio.png","imagenes/proyectos/sentio(1).png","imagenes/proyectos/sentio(2).png","imagenes/proyectos/sentio(3).png",], 
    nombre:"Sentio", 
    categoria:"proyecto final",
    a√±o:"2025",
    herramientas: ["HTML", "CSS", "JavaScript", "Node.js", "Arduino IDE", "Firebase", "Socket.io", ],
    descripcion:"Nuestro proyecto de fin de a√±o para el bachillerato consto de crear un escritorio que utilisace una Raspberry pi 5 junto a una pantalla, para que funcione como computadora, y una pulsera que combina una ESP32 c3 mini, MPU6050, y MAX30102 para monitorear el bienestar emocional de los alumnos. Yo fui el encargado de crear la pagina web, desarrollar un chat local que se ejecuta en cada Raspberry, que tambien se conecta a la pulsera y a su vez tambien programe en Arduino Ide. Por otro lado, aprendi a manejar el sistema operativo Linux para crear una AP."
    }, 
    {
    url:"https://gd.games/games/6b14b45a-be6f-4124-b0a5-0add0d879d77", 
    imgs:["imagenes/proyectos/oneDayVideogame(1).png","imagenes/proyectos/oneDayVideogame(2).png","imagenes/proyectos/oneDayVideogame(3).png", "imagenes/proyectos/oniet2025.jpg"],
    nombre:`One Day Videogame`, 
    categoria: "desarrollo videojuego",
    a√±o:"2025",
    descripcion:"En la ONIET, olimpiada organizada por la Universidad Blas Pascal, tuvimos con mi equipo 8horas continuas para desarrollar un video juego desde 0. Yo desarrolle el rol de programador y me encargue de crear todo el apartado funcional del videojuego con el cual obtuvimos el 1er lugar"
    },
    {
    url:"https://www.instagram.com/p/DCHix7nRR_r/?igsh=NWxxaXBvenZqYTRp ", 
    imgs:["imagenes/proyectos/ironBot (1).mp4","imagenes/proyectos/ironBot (2).mp4"], 
    nombre:`IronBot`, 
    categoria: "moldeado 3D",
    a√±o:"2024",
    descripcion:"El IronBot es una competencia de robotica donde participe con mi equipo en la categoria de 'Destreza', ganando el primer puesto. El rol que tuve en el equipo fue desarrollar la carroceria que protegio a nuestro robot, para llevar a cabo este trabajo tuve que armar un plano del robot a medida para luego pasar el plano a una herramienta de moldeado 3D para luego imprimirlo y tras un par de pruebas tener el resultado final con el cual salimos victoriosos."
    },
    {
    url:"", 
    imgs:["imagenes/proyectos/techCamp.jpg"], 
    nombre:`TechCampUCC`, 
    categoria: "trabajo en equipo",
    a√±o:"2024",
    descripcion:"En esta competencia organizada por la UCC, forme parte de un equipo aleatorio con el cual tuvimos que solucionar un problema real de una de las empresas asociadas al evento. Nuestro desafio fue crear una solucion para la empresa Akron, y gracias a nuestra innovaci√≤n ganamos a los demas equipos que formaban parte de la misma empresa, para quedar top 3 de la competencia."
    },
    {
    url:"https://gd.games/games/2c4305ab-4e2b-43ec-82ac-38398d32c50f", 
    imgs:["imagenes/proyectos/foreignCreatures (1).png","imagenes/proyectos/foreignCreatures (2).png","imagenes/proyectos/foreignCreatures (3).png", "imagenes/proyectos/foreignCreatures (4).png"], 
    nombre:`Videojuego: Foreign Creatures`, 
    categoria: "desarrollo de videojuego",
    a√±o:"2024",
    descripcion:"Durante unos meses me dedique a crear un videojuego en Gdevelop donde yo mismo hice todo el trabajo que el mismo involucra como: planifique el videojuego, programe, hice los sprites y animaciones, a√±adi los sonidos y efectos especiales del videojuego, etc."
    },
    {
    url:"https://gd.games/games/3036531d-6afa-4413-b923-c787d452091a", 
    imgs:["imagenes/proyectos/lostClimber (1).png","imagenes/proyectos/lostClimber (2).png","imagenes/proyectos/lostClimber (3).png", "imagenes/proyectos/lostClimber (4).png", "imagenes/proyectos/lostClimber (5).png"], 
    nombre:`Videojuego: Lost Climber`, 
    categoria: "desarrollo de videojuego",
    a√±o:"2024",
    descripcion:"Durante unos meses me dedique a crear un videojuego en Gdevelop donde yo mismo hice todo el trabajo que el mismo involucra como: planifique el videojuego, programe, hice los sprites y animaciones, a√±adi los sonidos y efectos especiales del videojuego, etc."
    },
    {
    url:"https://www.youtube.com/@Milanga2008", 
    imgs:["imagenes/proyectos/canalYt.png","imagenes/proyectos/canalYt(1).png","imagenes/proyectos/canalYt(2).png"], 
    nombre:`Canal de Youtube: Milanga`, 
    categoria: "edicion de video",
    a√±o:"2023-2024",
    descripcion:"Durante dos a√±os continuos me dedique a subir contenido semanalmente sobre videojuegos, logrando monetizarlo. Todo el procedimiento de creaci√≤n de los videos, desde: crear la idea, redactar un guion, grabar el material visual, buscar material sonoro e imagenes, editar el video, crear la miniatura, y promocionarlo, fue producci√≤n propia."
    },
    {
    url:"https://www.instagram.com/p/DCVEcFrOd1m/", 
    imgs:["imagenes/proyectos/tallerAjedrez.png","imagenes/proyectos/tallerAjedrez(1).png"],  
    nombre:`Taller de Ajedrez`, 
    categoria: "docencia",
    a√±o:"2024",
    descripcion:"Durante seis meses, diriji un taller de Ajedrez para el ciclo orientado de mi colegio. Durante estos seis meses planifique el temario, busque distintos materiales para preparar cada clase, prepare desafios y actividades para que los alumnos tuvieran clases divertidas y sea m√†s digerible el aprendizaje. Tambien a fin del a√±o organice un torneo interno entre los alumnos, donde pudieron asistir padres y docente, donde el ganador se llevo un premio"
    },
    {
    url:"", 
    imgs:["imagenes/proyectos/onietAjedrez.jpg"], 
    nombre:`ONIET - Competencia Ajedrez`, 
    categoria: "ajedrez",
    a√±o:"2024 y 2025",
    descripcion:"En la ONIET, olimpiada organizada por la Universidad Blas Pascal, participe ambos a√±os de la competencia de ajedrez presencial donde en 2024 gane el primer puesto, luego en 2025, sin ninguna preparaci√≤n previa, logre obtener el tercer lugar"
    },
]

//SECCION: FORMACION LABORAL
const container = document.getElementById('paginas')
formacionLaboral.forEach(pagina => {
    const div = document.createElement('div');
    div.className="contenedor"
    div.innerHTML = `
        <h1 style="font-size: clamp(1.5rem, 4vw, 2.5rem); text-align: center; margin: 10px 0;">${pagina.nombre}</h1>
        
        <div style="display:flex; flex-direction: row; justify-content: center; gap: 10px; flex-wrap: wrap;">
            <p class="categoria" style="padding: 5px 10px; border-radius: 15px; font-size: 14px; margin: 5px;">${pagina.categoria}</p>
            <p style="padding: 5px 10px; border-radius: 15px; font-size: 14px; margin: 5px;">${pagina.a√±o}</p>
        </div>
        
        <div class="contenedor-laboral">
        ${pagina.imgs && pagina.imgs.length > 0 ? `
            <div style="width: 100%; order: 1; ">
                <img id="slider-img-${pagina.nombre.replace(/\s+/g,'-')}" src="${pagina.imgs[0]}" style="width:100%; height:auto; border-radius: 10px;" alt="${pagina.nombre}">
                  ${pagina.imgs.length > 1 ? `
                <div class="progress-container" style="width:100%; height:4px; background:#ddd; border-radius:2px; overflow:hidden; margin-top:5px;">
                    <div class="progress-bar" id="progress-${pagina.nombre.replace(/\s+/g,'-')}" style="width:0%; height:100%; background:#306fc2ff; transition: width 0.1s linear;"></div>
                </div> ` : '' }
            </div> ` : '' }
            
            <div style="width: 100%; order: 2;">
                <p style="margin: 10px 0; line-height: 1.6; text-align: justify;">${pagina.descripcion}</p>

                ${pagina.url ? `
                    <a href="${pagina.url}" target="_blank" style="display: inline-block; padding: 10px 20px; background: #306fc2ff; color: white; text-decoration: none; border-radius: 5px; margin: 10px 0; text-align: center;">
                        Visitar sitio web
                    </a>
                ` : ''}
                
                <div style="margin-top: 20px;">
                    <h3 style="margin-bottom: 15px; text-align: center;">Herramientas utilizadas:</h3>
                    <ul style="display: flex; flex-wrap: wrap; gap: 8px; list-style: none; padding: 0; justify-content: center;">
                        ${pagina.herramientas.map(herramienta => 
                            `<li style="background: #306fc2ff; color: white; padding: 6px 12px; border-radius: 15px; font-size: 12px; text-align: center;">
                                ${herramienta}
                            </li>`
                        ).join('')}
                    </ul>
                </div>
            </div>
        </div>
    `;
    // üîÑ Carrusel de im√°genes
    if (pagina.imgs && pagina.imgs.length > 1) {

        let index = 0;
        const sliderId = `slider-img-${pagina.nombre.replace(/\s+/g,'-')}`;
        const progressId = `progress-${pagina.nombre.replace(/\s+/g,'-')}`;

        const duration = 5000; // cada 3 segundos cambia la imagen
        const step = 50;
        const increment = 100 / (duration / step);

        let progress = 0;

        // ‚è≥ Barra de progreso
        setInterval(() => {
            const bar = document.getElementById(progressId);
            if (!bar) return;

            progress += increment;
            if (progress > 100) progress = 100;
            bar.style.width = progress + "%";

        }, step);

        // üîÅ Cambiar imagen autom√°ticamente
        setInterval(() => {
            const img = document.getElementById(sliderId);
            const bar = document.getElementById(progressId);
            if (!img || !bar) return;

            index = (index + 1) % pagina.imgs.length;
            img.src = pagina.imgs[index];

            progress = 0;
            bar.style.width = "0%";

        }, duration);
    }

    // Agregar clase al contenedor principal
    div.classList.add('proyecto-container');
    container.appendChild(div);
});


//SECCION: PROYECTOS
proyectos.forEach(pagina => {
    const contenedorProyectos = document.getElementById("proyectos");
    const divProyectos = document.createElement('div');
    divProyectos.classList.add('proyecto-item', 'contenedor');

    divProyectos.innerHTML = `
    <div style="display: flex; justify-content: space-between; align-items: center; cursor: pointer; padding: 15px; border-radius: 10px;" class="toggle-header">
        <h2 style="margin: 0; font-size: clamp(1.2rem, 4vw, 1.5rem);">${pagina.nombre}</h2>
        <span class="toggle-arrow" style="font-size: 20px;">‚ñ∫</span>
    </div>

    <div class="content" style="display: none; padding: 0 15px;">

        <div style="display:flex; flex-direction: row; justify-content: center; gap: 10px; flex-wrap: wrap; margin: 15px 0;">
            <p class="categoria" style="padding: 5px 10px; border-radius: 15px; font-size: 14px; margin: 0;">${pagina.categoria}</p>
            <p style="padding: 5px 10px; border-radius: 15px; font-size: 14px; background: #306fc2ff; margin: 0;">${pagina.a√±o}</p>
        </div>

        <div class='contenedor-proyectos'>

            ${pagina.imgs && pagina.imgs.length > 0 && pagina.imgs[0] !== "" ? `
            <div class="carousel" style="position: relative; width: 100%; overflow: hidden; border-radius: 10px;">
                <img src="${pagina.imgs[0]}" class="carousel-img" style="width:100%; height:auto; display:block; border-radius: 10px;">

                <div class="progress-bar-container" 
                    style="position:absolute; bottom:0; left:0; width:100%; height:4px; background:rgba(255,255,255,0.4);">
                    <div class="progress-bar" 
                        style="height:100%; width:0%; background:#306fc2ff; transition:width 0.1s linear;"></div>
                </div>
            </div>
            ` : ""}

            <div style="width: 100%; margin:10px;">
                <p style="margin: 10px 0; line-height: 1.6; text-align: justify;">${pagina.descripcion}</p>

                ${pagina.url ? `
                    <a href="${pagina.url}" target="_blank" 
                        style="display: inline-block; padding: 12px 24px; background: #306fc2ff; color: white; 
                        text-decoration: none; border-radius: 5px; margin: 10px 0; text-align: center; 
                        width: 100%; box-sizing: border-box;">
                        Visitar sitio web
                    </a>
                ` : ''}
            </div>

        </div>
    </div>
    `;

    contenedorProyectos.appendChild(divProyectos);

    // --- CARRUSEL ---
    if (pagina.imgs && pagina.imgs.length > 1) {

        const carousel = divProyectos.querySelector(".carousel");
        const barContainer = divProyectos.querySelector(".progress-bar-container");
        const bar = divProyectos.querySelector(".progress-bar");

        let index = 0;
        let progreso = 0;
        const duracion = 5000; // tiempo por imagen
        const fps = 20;

        function esVideo(ruta) {
            return ruta.endsWith(".mp4")
        }

        function mostrarMedia() {
            const ruta = pagina.imgs[index];

            // limpiar sin borrar la barra
            carousel.innerHTML = "";

            let elemento;

            if (esVideo(ruta)) {
                elemento = document.createElement("video");
                elemento.src = ruta;
                elemento.autoplay = true;
                elemento.loop = true;
                elemento.muted = true;
                elemento.style.width = "100%";
                elemento.style.display = "block";
                elemento.style.borderRadius = "10px";
                elemento.playsInline = true;         
                elemento.controls = false;            
            } else {
                elemento = document.createElement("img");
                elemento.src = ruta;
                elemento.style.width = "100%";
                elemento.style.display = "block";
                elemento.style.borderRadius = "10px";
            }

            carousel.appendChild(elemento);
            carousel.appendChild(barContainer); // barra vuelve a su lugar correcto
        }

        mostrarMedia();

        setInterval(() => {
            progreso += 100 / (duracion / fps);
            bar.style.width = progreso + "%";

            if (progreso >= 100) {
                progreso = 0;
                index = (index + 1) % pagina.imgs.length;
                mostrarMedia();
            }
        }, fps);
    }
});

// Event delegation para manejar todos los toggles
document.getElementById('proyectos').addEventListener('click', function(e) {
    if (e.target.closest('.toggle-header')) {
        const header = e.target.closest('.toggle-header');
        const content = header.nextElementSibling;
        const arrow = header.querySelector('.toggle-arrow');
        
        if (content.style.display === 'none') {
            content.style.display = 'block';
            arrow.innerHTML = '‚ñº';
        } else {
            content.style.display = 'none';
            arrow.innerHTML = '‚ñ∫';
        }
    }
});
